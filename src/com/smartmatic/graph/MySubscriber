package com.smartmatic.graph;

public class MySubscriber<String> extends Subscriber<String> {

  private Session session;
  
  private String regionName;
  
  private String[] regionChilds;
  
  public MySubscriber(Session session, String regionName, String[] childs) {
      this.session = session;
      this.regionName = regionName;
      this.regionChilds = childs;
  }
  
  @Override
  public void onComplete() {}
  
  @Override
  public void onNext(String value) {
  
      String candidate1 = value.split("|")[0].split(":")[1];
      String candidate2 = value.split("|")[1].split(":")[1];
  
      JSONObject json = new JSONObject();
      JSONArray jsonArray = new JSONArray();
      
      json.put("regionName", regionName);
      json.put("childs", jsonArray.put(regionChilds));
      json.put("candidate1", candidate1);
      json.put("candidate2", candidate2);
      
      session.getBasicRemote().sendMessage(json.toString());
  }
  
  @Override
  public void onError(Throwable t) {}
}
